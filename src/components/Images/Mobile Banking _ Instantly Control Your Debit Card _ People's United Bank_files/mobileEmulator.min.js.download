/* (c) 2018,  @ horizn.  v 2020-07-22T19:29:46 */
var popupHelper=function(){var v,m="after",h=$.Deferred(),n={},g=null,e=200,t='<div class="modal-overlay"></div>';function r(){return void 0!==v&&v.length?v:g}function s(){v.length&&v.prepend(t),v.length||(g.prepend(t),g.css("position","relative"))}function a(t){var e=t.data("id");return n.hasOwnProperty(e)||(n[e]={focus:$(".emulator_interactive_element[data-type='tapping']:visible"),help:$(".emulator_interactive_element[data-type='help']:visible, .emulator-help_icon")}),n[e]}function u(){return $(".emulator_step:visible").attr("data-id")}function o(t,e){var n,a,o,i;s(),n=t,a=_.template($("#template-emulator_modal_button").html()),r().append(a(n)),l($(".btn-modal-js")),o=e,(i=$(".btn-modal-js")).unbind("click"),i.on("click",function(t){t.preventDefault(),T(!A(u())),void 0!==o&&o()})}function b(){return null!=v&&0<v.find(".emulator_modal:visible").length||null!=g&&0<g.find(".emulator_modal:visible").length}function T(t){var e;b()&&(b()&&r().find(".modal-overlay").remove(),$(".emulator_modal").remove(),g.data("flash_away_second")||(e=a(g),$.each(e,function(t,e){e.show()}),e.focus.find("button:visible").focus(),l($(".emulator-tapping:visible")))),(void 0===t||t)&&h.resolve()}function l(t){t.focus(),setTimeout(function(){t.focus()},e)}function E(t,e){var n;n=t,$.each(a(n),function(t,e){e.hide()}),o({buttonText:t.data("popup-btn-label"),content:t.data("popup-msg")},e)}function C(t){var e=R(t);return e.data("overlay")&&e.data("popup-placement")!==m}function A(t){var e=R(t);return e.data("overlay")&&e.data("popup-placement")==m}function R(t){return $(".emulator_step-"+t)}return $(document).keyup(function(t){27===t.keyCode&&$(".emulator_modal").length&&T(!A(u()))}),{modalIsOpen:b,closeModal:T,showRelevantPopup:function(t,e,n,a,o){return g=$(".emulator_step:visible"),v=$(".frame-interior"),C(e)?(l=t,c=e,p=n,d=o,f=R(c),h=$.Deferred(),d.direction==topNavigator.DIRECTION_FORWARD&&d.sourceType!=topNavigator.SOURCE_TYPE_TOPBAR&&C(c)?"landing"===l?setTimeout(function(){E(f,p)},1):E(f,p):h.resolve()):(i=e,r=a,s=o,u=R(i),h=$.Deferred(),s.sourceType==topNavigator.SOURCE_TYPE_TOPBAR_PREVIEW&&s.direction==topNavigator.DIRECTION_BACK&&u.data("overlay")&&u.data("popup-placement")===m&&!b()?E(u,function(){r()}):h.resolve()),h.promise();var i,r,s,u;var l,c,p,d,f},togglePopupInSameStep:function(t,e,n,a){return"post-popup"==e.sourceType?null:(p=t,d=e,f=a,(d.sourceType==topNavigator.SOURCE_TYPE_TOPBAR_PREVIEW&&d.direction==topNavigator.DIRECTION_FORWARD&&b()&&C(p)?(T(),f.startAnimation(p),!0):null)||(v=t,g=a,(m=e).sourceType!=topNavigator.SOURCE_TYPE_TOPBAR_PREVIEW||m.direction!=topNavigator.DIRECTION_BACK||b()||!C(v)?null:(h=$.Deferred(),E(R(v),function(){h.resolve()}),g.stopAnimation(v),h.promise()))||(u=t,l=e,c=a,l.sourceType==topNavigator.SOURCE_TYPE_TOPBAR_PREVIEW&&l.direction==topNavigator.DIRECTION_BACK&&b()&&A(u)?(T(),c.startAnimation(u),!0):null)||(o=t,i=e,r=n,s=a,i.direction==topNavigator.DIRECTION_FORWARD&&i.sourceType!=topNavigator.SOURCE_TYPE_TOPBAR&&A(o)&&!b()?(h=$.Deferred(),E(R(o),function(){r(),h.resolve()}),s.stopAnimation(o),h.promise()):null));var o,i,r,s;var u,l,c;var p,d,f;var v,m,g}}}(),autoTransition=function(){var i;function r(t){return!!$(".emulator_step-"+t).data("flash_away_second")}return{assessAutoTransition:function(t,e){var n,a,o=$(".emulator_step-"+t);r(t)&&(ScreenElementHelper().deleteElements(),void 0!==gifAnimator&&gifAnimator.startAnimation(t),n=o,a=e,i=setTimeout(function(){a(n.data("id"),n.data("flash_away_target"))},1e3*parseFloat(n.data("flash_away_second"))))},clearAutoTransition:function(){clearTimeout(i)},hasAutoTransition:r}}(),topNavigator=function(){var r,t,u="forward",e="topbar",n="topbar-preview",a=[];function o(t){$(".current-step:visible").text(t.text).attr("data-stepid",t.id)}function s(t){var e,n;switch(t){case"landing":e=1;break;case"ending":e=window.emulator_data.steps.length;break;default:n=t,e=_.findIndex(window.emulator_data.steps,function(t){return t.id==n})+1}o({text:e,id:t})}function l(t,e,n){t.attr(e,n)}function c(t){return void 0!==t&&_.contains(a,t.toString())}function p(t,e){c(t)&&!d(e)||a.push(t.toString())}function d(t){return"landing"===t}function f(t){return!t.hasClass("emulator-navigator-disable")}function v(t){t.addClass("emulator-navigator-disable")}function m(t){t.removeClass("emulator-navigator-disable")}function g(t){return 0<$(t.target).parents(".preview_navigation").length}function h(t){return t?n:e}function b(){autoTransition.clearAutoTransition()}function T(t){if(!t.hasClass("emulator-navigator-disable")&&t.parent().hasClass("preview_navigation")){if(step=$(".current-step:visible").html(),t.hasClass("next-step"))var e="Simulator Navigation Next Button - step "+step;else e="Simulator Navigation Previous Button - step "+step;ga("send","event",{eventCategory:"Mobile Simulator",eventAction:e,eventLabel:APP.activityName})}}function E(){t=setInterval(function(){C("&nbsp;"),clearInterval(t)},4e3)}function C(t){$("#navigation-emulator-status-js").html(t)}return{DIRECTION_FORWARD:u,DIRECTION_BACK:"back",SOURCE_TYPE_TOPBAR:e,SOURCE_TYPE_TOPBAR_PREVIEW:n,addVisitedNavigationStep:p,emulatorProgressBar:function(t,e){var n,a,o,i;r=$(".emulator_step-"+e),s(e),n=r.nextAll(".emulator_step").first().data("id"),l($(".next-step"),"data-nextstep",n),a=r.prevAll(".emulator_step").first().data("id"),l($(".previous-step"),"data-previousstep",a),p(t,e),o=e,m(i=$(".screen-count .next-step:visible")),"ending"!==o&&c(i.attr("data-nextstep"))||v(i)},previousScreenClickEvent:function(i){var t=$(".previous-step"),r=$(".next-step");t.unbind("click").bind("click",function(t){t.preventDefault(),E();var e=$(this),n=e.attr("data-previousstep"),a=$(".emulator_step:visible").data("id");if(void 0!==n){var o=g(t);f(e)||o?(T(e),f(r)&&m(r),d(n)&&v(e),b(),i(a,n,{sourceType:h(o),direction:"back"}),C(e.attr("data-msg-enable"))):C(e.attr("data-msg-disable"))}})},nextScreenClickEvent:function(i){var r=$(".next-step"),s=$(".previous-step");r.unbind("click").bind("click",function(t){t.preventDefault(),E();var e=$(this),n=e.attr("data-nextstep"),a=$(".emulator_step:visible").data("id");if(void 0!==n){var o=g(t);f(e)||o?(T(e),c(a)||v(r),m(s),b(),i(a,n,{sourceType:h(o),direction:u}),C(e.attr("data-msg-enable"))):C(e.attr("data-msg-disable"))}})},setCurrentStepData:o,updateNavigationState:function(t){var e=$(".emulator_step-"+t).prev().data("id"),n=$(".emulator_step-"+t).next().data("id");$(".previous-step").attr("data-previousstep",e),$(".next-step").attr("data-nextstep",n)}}}(),gifAnimator=function(){var e,n;function a(){var t=$(".emulator_step-"+n+" .gifffer-play-button");t.length&&(t.click(),clearInterval(e))}function s(t){return t.prop("src").toLowerCase().match(/\.gif/)}return{stopAnimation:function(t){e=t,n=$(".emulator_step-"+e),a=$(".emulator_app_screenshot",n),o=a.children("img").clone(),o.length&&($.each(a.prop("attributes"),function(){o.attr(this.name,this.value)}),o.insertBefore(a),a.remove());var e,n,a,o;var i=$(".emulator_step-"+t+" .emulator_app_screenshot"),r=i.attr("src");s(i)&&(i.attr("data-gifffer",r),Gifffer())},startAnimation:function(t){n=t,e=setInterval(a,10)},resetGifImage:function(){$("img.emulator_app_screenshot.js-giffer").each(function(){s($(this))&&$(this).attr("src",$(this).attr("src")+"?hs_refresh="+(new Date).getTime())})}}}();function PhoneListFactory(){var n=[new LargeFrame,new LongPhoneS8];return{findPhone:function(t){for(var e=0;e<n.length;e++)if(t==n[e].getKey())return n[e];return new DefaultFrame}}}function DefaultFrame(){return{height:0,useEmulatorHeight:function(){return!0}}}function LongPhoneS8(){return{height:623,getKey:function(){return"long_phone_s8"},useEmulatorHeight:function(){return!0}}}function LargeFrame(){return{height:623,getKey:function(){return"frame_large"},useEmulatorHeight:function(){return!0}}}function EmulatorFrame(e){var n=e,t=$(".emulator");function a(t){e.content,void 0===n.phone_screen_max_height&&void 0!==t&&(n.phone_screen_max_height=t)}return{loadFrame:function(){a((new PhoneListFactory).findPhone(n.override_key).height),void 0!==n.navigation&&t.addClass("navBarEnabled")}}}var EmulatorADAContainer=function(){var e,t=[".emulator-mobile-progress","#emulator-desktop-progress"],n="#btn-start-simulator",a=".emulator .emulator-tapping",o=20,i=10;function r(e){return t.map(function(t){return t+" "+e}).join(", ")}function s(r){void 0!==r&&(r.focus(),setTimeout(function(){r.focus();var t,e,n,a,o,i=r.offset();void 0===i||(e=(t=r).offset().top,n=e+t.outerHeight(),a=$(window).scrollTop(),o=a+$(window).height(),a<e&&n<o)||!r.hasClass("emulator-tapping")||!r.is(":visible")||$("body").hasClass("body--desktop_simulator")||$("html, body").animate({scrollTop:i.top,scrollLeft:i.left})},o))}function u(){s($(a+":visible"))}function l(){$(".emulator-mobile-progress button, #emulator-desktop-progress button").each(function(){var t=$(this),e="";setTimeout(function(){e=t.hasClass("emulator-navigator-disable")?"disable-msg":"msg",t.attr("aria-label",t.data(e))},i)})}return{init:function(){var t;e=$(".emulator"),(t=$("body")).on("click",a,u),t.on("click",n,u),function(){var t=$("body"),e=r(".next-step");t.on("click",e,function(t){s($(e+":visible"))});var n=r(".previous-step");t.on("click",n,function(t){s($(n+":visible"))})}(),e.on("EMULATOR_NEXT",function(t,e,n,a){l()}),e.on("EMULATOR_DONE",function(){s($(".ending-emulator-wrapper h2, h3"))}),e.on("EMULATOR_TRYAGAIN",function(){l()}),e.on("EMULATOR_STARTED",function(){s($(a+":visible"))}),l()},focusToTappingElement:u}}();function enableSwitchPulse(t){var n=$(".circle-pulse-img"),a=$(".circle-static-img"),o=$(".pulsating");function e(t){var e;o.toggleClass("pulsating--disabled",!t),e=t,n.toggleClass("addPulse",e).toggleClass("removePulse",!e),a.toggleClass("removePulse",e).toggleClass("addPulse",!e)}function i(){return sessionStorage.pulseEnable}function r(t){sessionStorage.pulseEnable=t}t.bind("click",function(){var t=!("false"!==i());e(t),r(t),$(this).attr("aria-checked",t),$(this).parent().removeClass("outline-switch")}),t.bind("keyup",function(t){13===t.keyCode&&($(this).trigger("click"),$(this).parent().addClass("outline-switch"))}),$(".switch").bind("click",function(){t.trigger("click")}),t.bind("focus",function(){$(this).parent().addClass("outline-switch")}),t.bind("focusout",function(){$(this).parent().removeClass("outline-switch")}),void 0===i()&&r(!0),t.attr("checked","true"===i()),e("false"!==i())}$(document).ready(function(){EmulatorADAContainer.init()});var EmulatorHelper=function(){return{stripTags:function(t){return t.replace(/(<([^>]+)>)/g," ")}}};
//# sourceMappingURL=mobileEmulator.min.js.map